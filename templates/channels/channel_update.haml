-extends "smartmin/update.html"
-load i18n

-block title

  %h2
    {{ title }}

-block form-buttons
  .form-actions
    %input.btn.btn-primary{type:"submit", value:"{{ submit_button_name }}"}
    %a.btn{onclick:"javascript:history.go(-1)"}
      -trans "Cancel"

-block extra-style
  :css
    .form-group {
      margin-bottom:15px;
    }
{% block extra-script %}
<script src="{{ STATIC_URL }}js/jscolor.js"></script>
:javascript
  (function($) {
    // change the value of the first option to be empty so that select2 placeholder works
    $('#id_country').children(":first").remove();

    $('#id_country').select2({
      // add this class the select2 if you want to look similar with other fields
      containerCssClass: 'select2-temba-field',
      placeholder: "{% trans 'Select a Country' %}"
    });
    $('#id_theme').select2({
      width: '370px',
      containerCssClass: 'select2-temba-field',
      placeholder: "{% trans 'Select a theme' %}"
    });
    $('#id_logo_style').select2({
      width: '370px',
      containerCssClass: 'select2-temba-field',
      placeholder: "{% trans 'Select a logo style' %}"
    });
    $('#id_logo').change(function() {
      var el = $(this);
      var file = el[0].files[0];
      var typesAllowed = ['image/png', 'image/jpg', 'image/jpeg', 'image/gif'];
      if (typesAllowed.indexOf(file.type) < 0) {
        alert('{% trans "Please, upload a logo using one of the following formats: PNG, JPG, JPEG or GIF." %}');
        el.val("");
      }
    });
  })(jQuery);
{% endblock %}
